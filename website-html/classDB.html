<!DOCTYPE HTML>
<html>
	<head>
		<title>tritongroups</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<script src="/__/firebase/8.0.1/firebase-app.js"></script>
		<script src="/__/firebase/8.0.1/firebase-auth.js"></script>
		<script src="/__/firebase/8.0.1/firebase-analytics.js"></script>
		<script src="/__/firebase/8.0.1/firebase-database.js"></script>
		<script src="/__/firebase/8.0.1/firebase-storage.js"></script>
		<script src="/__/firebase/init.js"></script>
		<script src="assets/js/auth.js"></script>
	</head>
	<body class="landing is-preload">


		<!-- Page Wrapper -->
			<div id="page-wrapper">

                <!-- Header -->
					<header id="header" class="alt">
						<!-- <h1><a href="index.html">TritonGroups</a></h1> -->
						<nav id="nav">
							<!-- <ul> -->
								<!-- <li class="special"> -->
									<ul class="menuToggle" >
										<a href="afterlogin.html" class="no-style more scrolly zero-text" style="font-weight: bold; cursor: pointer;">Home</a>
										&nbsp;
										|
										&nbsp;
										<a href="browse-class.html" class="no-style more scrolly one-text" style="cursor: pointer;">Classes</a>
										&nbsp;
										|
										&nbsp;
										<a href="browse-community.html" class="no-style more scrolly two-text" style="cursor: pointer;">Communities</a>
										&nbsp;
										|
										&nbsp;
										<img id="profilePicUserProfile" src="" onclick="openProfileForm()" referrerpolicy="no-referrer" class="avatar" alt="" style="vertical-align:middle;margin:0 5px 5px 0;width:32px; height:32px; cursor: pointer;">
										&nbsp;
										&nbsp;
									</ul>
								<!-- </li> -->
							<!-- </ul> -->
						</nav>
					</header>
					<div class="form-popup" id="profileForm" style="background-color: #13274a; border: #13274a; text-align: center; border-radius: 10px; padding:26px 0 15px 0; justify-content: center; width:230px; position:fixed; right:20px; top:50px; border: solid black 1px; z-index:20;">
						<div style="padding: 0px 20px 0px 20px;">
							<img id="profilePicUserProfile2" src="" referrerpolicy="no-referrer" class="avatar" alt="" style="margin:0 0 6px 0;width:80px;height:80px;justify-self: center;">
							
							<div id="profileName" style="color: white; font-size:medium; font-weight:lighter; line-height: normal;" >User</div>
							<div id="profileEmail" style="color: white; font-size:small; font-weight:lighter; line-height: normal;" >Email</div>
							
							<button type="button" onclick="location.href='userprofile.html'" style="color: white; margin:30px 0 20px 0; overflow: visible;  padding:0 10px 0 10px;">Profile</button>
							<br>
							<button type="button" onclick="signOutFunction()" style="color: white;margin: 0px 0 20px 0; overflow: visible;  padding:0 10px 0 10px;">Sign out</button>
							<div style="width:200px;">
								<div onclick="goToContactUs()" class="profileCard" style="display: inline-block; font-size:12px; padding: 0 5px 0 5px;">Contact Us</div>
								<div style="display: inline-block; font-size:11px; padding: 0px;">&#9675;</div>
								<div href="#" class="profileCard" style="display: inline-block; font-size:12px; padding: 0 5px 0 5px;">About Us</div>
							</div>
							
						</div>	
					</div>
                <script>
                    window.onload = function() {
						document.getElementById("myclass").innerHTML=localStorage.getItem("classinput");
						//getDiscordInfo(localStorage.getItem("classinput")); //get 5 discord infos from DB
						constructHTML(localStorage.getItem("classinput"));
						getClassSnapshot();
						//get all class info from DB for search engine
						//get all class info from FB database

						// document.getElementById("email").placeholder=localStorage.getItem("user-email");
						// document.getElementById("email").value=localStorage.getItem("user-email");
						// // localStorage.removeItem("user-email");
						// document.getElementById("fullname").placeholder=localStorage.getItem("user-displayname");
						// document.getElementById("fullname").value=localStorage.getItem("user-displayname");
						// localStorage.removeItem("user-displayname");
						//remove local storage items in signout function for security.
                    }
					// load profile pic, load name, load email
					var profileImgUrl = localStorage.getItem("user-profileimgurl");
					document.getElementById("profilePicUserProfile").src=profileImgUrl;
					document.getElementById("profilePicUserProfile2").src=profileImgUrl;
					document.getElementById("profileEmail").innerHTML=localStorage.getItem("user-email");
					document.getElementById("profileName").innerHTML=localStorage.getItem("user-displayname");
        			// open profile popout
					function openProfileForm() {
						if (document.getElementById("profileForm").style.display == "grid") {
							document.getElementById("profileForm").style.display = "none";
						} else {
							document.getElementById("profileForm").style.display = "grid"; 
						}
					}

					// close profile popout
					function closeProfileForm() {
  						document.getElementById("profileForm").style.display = "none";
					}
					
                </script>
				<!-- Banner -->
				<section id="banner">

					<div class="inner">
						<br><br><br><br>

						<h2>Browse Classes</h2>

						<p></p>
						<div id="classSearchBar" style="display: block;">
							<ul class="actions special">
								<form autocomplete="off" action="/action_page.php">
									<div class="autocomplete" style="width:400px;">
										<input id="inputClasses" type="text" name="searchclasses" style="text-align:center;" placeholder="Search Classes">
									</div>
								</form>
							</ul>
							<input type="submit" onclick="submit_class()" value="SEARCH">
						</div>
					</div>

				</section>

				<section class="wrapper style5">

					<div id="results" class="inner" style="text-align: center">
						<h2 style="text-align: center" id="myclass"></h2>

						<!-- Display query results here -->
						<ul id="queryResults" class="alt" style="display: inline-block;">

						</ul>
					</div>
					<div id="openformButton">
						<button class="	open-button" onclick="openForm()">&#43;</button>
					</div>
					<script>
						function openForm() {
							document.getElementById("myForm").style.display = "block";
							document.getElementById("openformButton").style.display = "none";
							document.getElementById("formsection").style.display = "none";
							document.getElementById("searchbarsubmit").style.display = "none";
						}

						function closeForm() {
							document.getElementById("myForm").style.display = "none";
							document.getElementById("openformButton").style.display = "block";
							document.getElementById("openformButton").style.margin = "auto"; //necessary for button position
							document.getElementById("formsection").style.display = "block";
							document.getElementById("searchbarsubmit").style.display = "block";
						}
					</script>
					<div class="form-popup" id="myForm">
						<form class="form-container">
							<div class="row gtr-uniform">
							<div class="col-12" style="text-align: center;">

								<h4>Add a New Discord Server</h4>
							</div>
								<div class="col-12">
							<select name="selectyear" rows="1" id="year">
								<option value="">Select Year</option>
								<option value="2020">2020</option>
								<option value="2021">2021</option>
							</select>
								</div>
								<div class="col-12">
							<select name="selectquarter" rows="1" id="quarter">
								<option value="">Select Quarter</option>
								<option value="spring">Spring</option>
								<option value="summer">Summer</option>
								<option value="fall">Fall</option>
								<option value="winter">Winter</option>
							</select>
								</div>
								<div class="col-12">
							<input type="text" placeholder="Professor" id="professor" required>
								</div>
								<div class="col-12">
							<input type="text" placeholder="Discord Invite Link" id="invitelink" required>
								</div>
						<div class="col-12">
							<ul class="actions">
								<li><input type="submit" value="Submit" class="primary" onclick="getDiscordRequests()"/></li>
								<li><input type="reset" value="Close" onclick="closeForm()"/></li>
							</ul>
							<!--<button type="submit" class="btn" onclick="addDiscordInfotoDB()" style="margin:10px; font: inherit;">Submit</button>
							<button type="button" class="btn cancel" onclick="closeForm()" style="margin-top:20px; font: inherit;">Close</button>-->
						</div>
							</div>
						</form>
					</div>

				</section>




				<!-- Footer -->
					<footer id="footer">
						<ul class="icons">
							<!-- <li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li> -->
							<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
							<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
							<!-- <li><a href="#" class="icon brands fa-dribbble"><span class="label">Dribbble</span></a></li> -->
							<li><a href="#" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
						</ul>
						<ul class="copyright"></br>
							<li>3855 Nobel Dr #1243, San Diego, CA 92122 |</li> </br>
						</ul>
					</footer>

			</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/jquery.scrolly.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>
            <script src="assets/js/login.js"></script>
            <script src="assets/js/searchClass.js"></script>
			<script src="assets/js/feedbackDiscordUtil.js"></script>
			<script src="assets/js/profileCard.js"></script>
			<!-- <script src="assets/js/searchCommunity.js"></script> -->

			<!--JQuery script-->
			<script>
		    // this will close the profile popout element if anything else besides that and profile pic is clicked
			$(document).click(function(e){
				if($(e.target).closest("#profileForm").length > 0 || ($(e.target).closest("#profilePicUserProfile").length > 0)) {
					return true;
			}
        	    closeProfileForm();
    		});
        
			</script>

			<!-- below is firebase SDKs-->
			<!-- Add Firebase SDKs and initialize Firebase from HOSTING URL-->
			<!-- this works only when we are using firebase hosting service-->
			<!-- and it's userful because we don't have to initialize firebaseConfig manually-->
			<!-- <script src="/__/firebase/8.0.1/firebase-app.js"></script>
  			<script src="/__/firebase/8.0.1/firebase-analytics.js"></script>
  			<script src="/__/firebase/8.0.1/firebase-auth.js"></script>
			<script src="/__/firebase/8.0.1/firebase-database.js"></script>
			<script src="/__/firebase/init.js"></script> -->
            <!-- TAKE THIS OUT ONCE SCREENSHOT IS DONE-->
			<script>var container = document.querySelector(" #results > #queryResults ");
			var coll = container.querySelectorAll(" .community > .collapsible")
			var i;
			for (i = 0; i < coll.length; i++) {
				coll[i].addEventListener("click", function() {
					this.classList.toggle("active");
					var content = this.nextElementSibling;
					if (content.style.display === "block") {
						content.style.display = "none";
					} else {
						content.style.display = "block";
					}
				});
			}</script>
	</body>
</html>
